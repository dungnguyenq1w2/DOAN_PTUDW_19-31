<main>
  <section class="main__top">
    <div class="container">
      <div class="row justify-content-center">
        <div class="col-auto">
          <div class="title__thin">
            <h1><b>Products List</b></h1>
          </div>
        </div>
      </div>
    </div>
  </section>
  <section class="main__product-list">
    <div class="container">
      <div class="row">
        <div class="shop__features">
          <div class="shop__features__left">
            <div class="shop__features__search">
              <input type="text" placeholder="Search by product's name" />
            </div>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="search__icon"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
              ></path>
            </svg>
          </div>
          <div class="shop__features__right">
            <span>Sort by:</span>
            <div class="shop__features__sort">
              <select class="form-select" aria-label="Default select example">
                <option selected>Default</option>
                <option value="1">Name</option>
                <option value="2">Price</option>
              </select>
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col">
          <div class="add-product">
            <button
              type="button"
              class="btn btn-secondary"
              onclick="location.href='/cakes/create'"
            >
              <img src="/images/add-icon.png" alt="Add icon" />
              <span>&nbsp;Add a new product</span>
            </button>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="shop__products">
        <% cakes.forEach((cake) => { %>
          <div class="product">
            <div class="product__img">
              <img src="<%= cake.figure %>" alt="product-1" />
              <span><%= cake.category %></span>
            </div>
            <div class="product__info">
              <h5><%= cake.name %></h5>
              <h5><%= cake.price %></h5>
            </div>
            <div class="buttons">
              <div
                class="buttons__edit-product"
                onclick="location.href='/cakes/<%= cake._id %>/update'"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                >
                  <path
                    d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm-5 17l1.006-4.036 3.106 3.105-4.112.931zm5.16-1.879l-3.202-3.202 5.841-5.919 3.201 3.2-5.84 5.921z"
                  ></path>
                </svg>
                Edit product
              </div>
              <div
                class="buttons__remove-product"
                      onclick="location.href='/cakes/<%= cake._id %>/delete'"
                      //onclick="return confirm('Are you sure you want to delete this product?');"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                >
                  <path
                    d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm4.151 17.943l-4.143-4.102-4.117 4.159-1.833-1.833 4.104-4.157-4.162-4.119 1.833-1.833 4.155 4.102 4.106-4.16 1.849 1.849-4.1 4.141 4.157 4.104-1.849 1.849z"
                  ></path>
                </svg>
                Remove product
              </div>
            </div>
          </div>
        <% }); %>
      </div>

      <div class="row">
        <div class="col text-center">
          <div class="pagination-bar">
            <a href="#" class="previous-button">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="10"
                height="25.5"
                viewBox="0 0 24 24"
              >
                <path d="M3 12l18-12v24z"></path>
              </svg>
            </a>
            <% for (let i = 1; i <= numPages; i++) { %>
            <a href="/cakes?page=<%= i %>"
              <% if (i == page) { %>
              class="active"
              <% } %>
              ><%= i %></a>
            <% } %>
            <a href="#" class="next-button">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="10"
                height="25.5"
                viewBox="0 0 24 24"
              >
                <path d="M21 12l-18 12v-24z"></path>
              </svg>
            </a>
          </div>
        </div>
      </div>
    </div>
  </section>
</main>